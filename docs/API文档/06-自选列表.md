# 自选列表 API

## 1. 自选列表

### 接口信息

- **路径**: `/api/watchlists/`
- **方法**: `GET`
- **认证**: 需要
- **描述**: 获取当前用户的所有自选列表

### 请求头

```
Authorization: Bearer <access_token>
```

### 响应示例

```json
[
  {
    "id": "uuid-string",
    "name": "我的自选",
    "items": [
      {
        "id": "uuid-string",
        "fund": "uuid-string",
        "fund_code": "000001",
        "fund_name": "华夏成长混合",
        "fund_type": "混合型",
        "order": 0,
        "created_at": "2024-01-01T00:00:00Z"
      }
    ],
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

### 响应字段

| 字段 | 类型 | 说明 |
|------|------|------|
| id | uuid | 自选列表 ID |
| name | string | 列表名称 |
| items | array | 自选项列表 |
| created_at | datetime | 创建时间 |

### 状态码

- `200` - 成功
- `401` - 未认证

---

## 2. 创建自选列表

### 接口信息

- **路径**: `/api/watchlists/`
- **方法**: `POST`
- **认证**: 需要
- **描述**: 创建新的自选列表

### 请求参数

```json
{
  "name": "我的自选"
}
```

### 响应示例

```json
{
  "id": "uuid-string",
  "name": "我的自选",
  "items": [],
  "created_at": "2024-01-01T00:00:00Z"
}
```

### 状态码

- `201` - 创建成功
- `400` - 参数错误
- `401` - 未认证

---

## 3. 自选列表详情

### 接口信息

- **路径**: `/api/watchlists/{id}/`
- **方法**: `GET`
- **认证**: 需要
- **描述**: 获取自选列表详情

### 路径参数

| 参数 | 类型 | 说明 |
|------|------|------|
| id | uuid | 自选列表 ID |

### 响应示例

```json
{
  "id": "uuid-string",
  "name": "我的自选",
  "items": [
    {
      "id": "uuid-string",
      "fund": "uuid-string",
      "fund_code": "000001",
      "fund_name": "华夏成长混合",
      "fund_type": "混合型",
      "order": 0,
      "created_at": "2024-01-01T00:00:00Z"
    }
  ],
  "created_at": "2024-01-01T00:00:00Z"
}
```

### 状态码

- `200` - 成功
- `401` - 未认证
- `404` - 自选列表不存在

---

## 4. 更新自选列表

### 接口信息

- **路径**: `/api/watchlists/{id}/`
- **方法**: `PUT` / `PATCH`
- **认证**: 需要
- **描述**: 更新自选列表名称

### 请求参数

```json
{
  "name": "新名称"
}
```

### 响应示例

```json
{
  "id": "uuid-string",
  "name": "新名称",
  "items": [],
  "created_at": "2024-01-01T00:00:00Z"
}
```

### 状态码

- `200` - 更新成功
- `400` - 参数错误
- `401` - 未认证
- `404` - 自选列表不存在

---

## 5. 删除自选列表

### 接口信息

- **路径**: `/api/watchlists/{id}/`
- **方法**: `DELETE`
- **认证**: 需要
- **描述**: 删除自选列表

### 响应

无响应体

### 状态码

- `204` - 删除成功
- `401` - 未认证
- `404` - 自选列表不存在

---

## 6. 添加基金到自选

### 接口信息

- **路径**: `/api/watchlists/{id}/items/`
- **方法**: `POST`
- **认证**: 需要
- **描述**: 添加基金到自选列表

### 路径参数

| 参数 | 类型 | 说明 |
|------|------|------|
| id | uuid | 自选列表 ID |

### 请求参数

```json
{
  "fund_code": "000001"
}
```

### 响应示例

```json
{
  "id": "uuid-string",
  "fund_code": "000001"
}
```

### 状态码

- `201` - 添加成功
- `400` - 参数错误或基金已存在
- `401` - 未认证
- `404` - 自选列表或基金不存在

---

## 7. 从自选移除基金

### 接口信息

- **路径**: `/api/watchlists/{id}/items/{fund_code}/`
- **方法**: `DELETE`
- **认证**: 需要
- **描述**: 从自选列表移除基金

### 路径参数

| 参数 | 类型 | 说明 |
|------|------|------|
| id | uuid | 自选列表 ID |
| fund_code | string | 基金代码 |

### 响应

无响应体

### 状态码

- `204` - 移除成功
- `401` - 未认证
- `404` - 自选列表或基金不存在

---

## 8. 重新排序自选列表

### 接口信息

- **路径**: `/api/watchlists/{id}/reorder/`
- **方法**: `PUT`
- **认证**: 需要
- **描述**: 重新排序自选列表中的基金

### 路径参数

| 参数 | 类型 | 说明 |
|------|------|------|
| id | uuid | 自选列表 ID |

### 请求参数

```json
{
  "fund_codes": ["000003", "000001", "000002"]
}
```

### 请求字段

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| fund_codes | array | 是 | 基金代码数组，按新顺序排列 |

### 响应示例

```json
{
  "message": "排序已更新"
}
```

### 状态码

- `200` - 更新成功
- `400` - 参数错误
- `401` - 未认证
- `404` - 自选列表不存在

### 注意事项

- fund_codes 数组中的基金代码必须都在自选列表中
- 不在数组中的基金将保持原有顺序
- 数组顺序即为新的排序顺序（从 0 开始）
