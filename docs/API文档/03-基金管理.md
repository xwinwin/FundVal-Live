# 基金管理 API

## 1. 基金列表

### 接口信息

- **路径**: `/api/funds/`
- **方法**: `GET`
- **认证**: 不需要
- **描述**: 获取基金列表（分页）

### 请求参数

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | integer | 否 | 页码，默认 1 |
| page_size | integer | 否 | 每页数量，默认 20 |
| search | string | 否 | 搜索关键词（基金代码或名称） |
| fund_type | string | 否 | 基金类型过滤 |

### 响应示例

```json
{
  "count": 100,
  "results": [
    {
      "fund_code": "000001",
      "fund_name": "华夏成长混合",
      "fund_type": "混合型",
      "yesterday_nav": "1.2345",
      "created_at": "2024-01-01T00:00:00Z"
    }
  ]
}
```

### 状态码

- `200` - 成功

---

## 2. 基金详情

### 接口信息

- **路径**: `/api/funds/{fund_code}/`
- **方法**: `GET`
- **认证**: 不需要
- **描述**: 获取基金详细信息

### 路径参数

| 参数 | 类型 | 说明 |
|------|------|------|
| fund_code | string | 基金代码 |

### 响应示例

```json
{
  "fund_code": "000001",
  "fund_name": "华夏成长混合",
  "fund_type": "混合型",
  "yesterday_nav": "1.2345",
  "created_at": "2024-01-01T00:00:00Z"
}
```

### 状态码

- `200` - 成功
- `404` - 基金不存在

---

## 3. 获取基金估值

### 接口信息

- **路径**: `/api/funds/{fund_code}/estimate/`
- **方法**: `GET`
- **认证**: 不需要
- **描述**: 获取基金实时估值

### 路径参数

| 参数 | 类型 | 说明 |
|------|------|------|
| fund_code | string | 基金代码 |

### 请求参数

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| source | string | 否 | 数据源名称，默认 eastmoney |

### 响应示例

```json
{
  "fund_code": "000001",
  "fund_name": "华夏成长混合",
  "estimate_value": "1.2456",
  "estimate_time": "2024-01-01 14:30:00",
  "yesterday_nav": "1.2345",
  "estimate_growth_rate": "0.90%"
}
```

### 状态码

- `200` - 成功
- `404` - 基金或数据源不存在
- `500` - 数据源获取失败

---

## 4. 获取基金准确率

### 接口信息

- **路径**: `/api/funds/{fund_code}/accuracy/`
- **方法**: `GET`
- **认证**: 不需要
- **描述**: 获取基金各数据源的准确率统计

### 路径参数

| 参数 | 类型 | 说明 |
|------|------|------|
| fund_code | string | 基金代码 |

### 请求参数

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| days | integer | 否 | 统计天数，默认 100 |

### 响应示例

```json
{
  "eastmoney": {
    "avg_error_rate": "0.0123",
    "record_count": 100,
    "records": [
      {
        "date": "2024-01-01",
        "error_rate": "0.0120"
      }
    ]
  },
  "tiantian": {
    "avg_error_rate": "0.0156",
    "record_count": 95,
    "records": [
      {
        "date": "2024-01-01",
        "error_rate": "0.0150"
      }
    ]
  }
}
```

### 响应字段

| 字段 | 类型 | 说明 |
|------|------|------|
| avg_error_rate | decimal | 平均误差率 |
| record_count | integer | 记录数量 |
| records | array | 每日误差率记录 |

### 状态码

- `200` - 成功
- `404` - 基金不存在

---

## 5. 同步基金列表（管理员）

### 接口信息

- **路径**: `/api/funds/sync/`
- **方法**: `POST`
- **认证**: 需要（管理员）
- **描述**: 从数据源同步基金列表

### 请求头

```
Authorization: Bearer <access_token>
```

### 响应示例

```json
{
  "created": 50,
  "updated": 150,
  "total": 200
}
```

### 状态码

- `200` - 同步成功
- `401` - 未认证
- `403` - 无权限（非管理员）
- `500` - 同步失败
